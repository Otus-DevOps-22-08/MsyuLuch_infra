# MsyuLuch_infra
MsyuLuch Infra repository

# Выполнено ДЗ № 7

 - [+] Основное ДЗ
 - [] Задание со *

## В процессе сделано:
 1. Создали образы с предустановленными приложениями, с помощью `packer` и скриптов: `install_mongodb.sh` и `install_ruby.sh`

 2. Конфигурацию разбили на модули: app, db. Конфигурация модулей отличается только используемым образом диска, созданным на предыдущем шаге.

 3. В директории terrafrom создали директории stage, prod. В каждом одинаковый набор файлов для разворачивания двух окружений. Модули используются повторно в каждом окружении.

    ```
    variables.tf - описание переменных проекта
    main.tf - основная конфигурация ВМ
    output.tf - описание выводимых на экран значений
    ```

## Как запустить проект:

    В дирректории `stage` или `prod` выполнить команды

    ```
    $ terraform validate
    $ terraform plan
    $ terraform apply
    ```

## Как проверить работоспособность:

    Через ssh попадаем на хосты и проверяем:

    app: установлены `ruby-full ruby-bundler build-essential`
    db: установлена БД `mongodb-org` и слушается локальный порт

## PR checklist
 - [+] Выставил label с темой домашнего задания
